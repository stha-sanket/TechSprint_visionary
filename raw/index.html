<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>AR Chemistry Lab</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-xr@latest/dist/aframe-xr.min.js"></script>
    <script src="https://www.gstatic.com/draco/versioned/decoders/1.5.6/draco_decoder.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- Loading Screen -->
    <div id="loading">
        <h2>ðŸ”¬ AR Chemistry Lab</h2>
        <p>Allow camera access to start</p>
        <button id="start-ar">Start AR Experience</button>
    </div>

    <!-- AR Scene -->
    <a-scene xr-mode-ui="enabled: false" xrweb="enabled: true">
        <a-assets>
            <a-asset-item id="beaker-model" src="assets/models/beaker_draco.glb"></a-asset-item>
        </a-assets>

        <!-- Camera -->
        <a-entity id="rig" position="0 1.6 0">
            <a-camera id="camera" user-height="0" wasd-controls="enabled: false">
                <a-cursor fuse="false" raycaster="objects: [data-raycastable]; far: 20" visible="false"></a-cursor>
            </a-camera>
        </a-entity>

        <!-- AR Content Container -->
        <a-entity id="ar-content"></a-entity>
        <a-entity id="ar-plane" class="ar-plane" data-raycastable geometry="primitive: plane; width: 50; height: 50"
            rotation="-90 0 0" position="0 0 0"
            material="opacity: 0.01; color: #444; transparent: true; visible: false"></a-entity>

        <!-- Placement Reticle -->
        <a-ring id="reticle" radius-inner="0.55" radius-outer="0.65" rotation="-90 0 0" color="#3498db" visible="false"
            animation="property: scale; to: 1.1 1.1 1.1; dir: alternate; dur: 1000; loop: true"></a-ring>

        <!-- UI Overlay -->
        <a-entity id="ui" position="0 0 -2">
            <a-text id="instruction" value="Tap to place beakers" position="0 1.5 0" color="white"
                align="center"></a-text>
            <a-plane id="reaction-panel" color="#222" opacity="0.9" position="0 -0.5 0" width="1.5" height="0.8"
                visible="false">
                <a-text id="reaction-text" color="white" align="center" width="1.4"></a-text>
            </a-plane>
        </a-entity>

        <!-- Lights -->
        <a-entity light="type: ambient; intensity: 0.8"></a-entity>
        <a-entity light="type: directional; intensity: 0.6" position="1 2 1"></a-entity>
    </a-scene>

    <!-- Debug Overlay -->
    <div id="debug-overlay"></div>

    <script src="js/reactions.js"></script>
    <script src="js/app.js"></script>
</body>

</html>